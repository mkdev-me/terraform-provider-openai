---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "openai_run Resource - terraform-provider-openai"
subcategory: ""
description: |-
  
---

# openai_run (Resource)



## Example Usage

```terraform
# Create an assistant for code review
resource "openai_assistant" "code_reviewer" {
  name        = "Code Review Assistant"
  description = "An AI assistant that reviews code and provides feedback"
  model       = "gpt-4-turbo-preview"

  instructions = "You are an expert code reviewer. Analyze code for bugs, security issues, performance problems, and suggest improvements. Be constructive and educational in your feedback."

  tools {
    type = "code_interpreter"
  }

  metadata = {
    version = "1.0"
    team    = "engineering"
  }
}

# Create a thread with code to review
resource "openai_thread" "code_review_thread" {
  messages {
    role    = "user"
    content = "Please review this Python function for security and performance:\n\n```python\ndef process_user_input(user_data):\n    query = f\"SELECT * FROM users WHERE id = {user_data['id']}\"\n    result = db.execute(query)\n    return result\n```"
  }

  metadata = {
    review_type = "security-performance"
    language    = "python"
  }
}

# Create a run to execute the assistant on the thread
resource "openai_run" "code_review_run" {
  thread_id    = openai_thread.code_review_thread.id
  assistant_id = openai_assistant.code_reviewer.id

  # Optional: Override assistant instructions for this specific run
  instructions = "Focus particularly on SQL injection vulnerabilities and suggest secure alternatives."

  # Optional: Override model for this run
  model = "gpt-4-turbo-preview"

  # Optional: Add metadata
  metadata = {
    priority     = "high"
    requested_by = "security-team"
    ticket_id    = "SEC-2024-001"
  }

  # Optional: Configure tools
  tools = [
    {
      type = "code_interpreter"
    }
  ]
}

# Create another run with different parameters
resource "openai_thread" "optimization_thread" {
  messages = [
    {
      role    = "user"
      content = "How can I optimize this sorting algorithm?\n\n```javascript\nfunction bubbleSort(arr) {\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = 0; j < arr.length - 1; j++) {\n      if (arr[j] > arr[j + 1]) {\n        let temp = arr[j];\n        arr[j] = arr[j + 1];\n        arr[j + 1] = temp;\n      }\n    }\n  }\n  return arr;\n}\n```"
    }
  ]
}

resource "openai_run" "optimization_run" {
  thread_id    = openai_thread.optimization_thread.id
  assistant_id = openai_assistant.code_reviewer.id

  instructions = "Provide optimized versions of the code with explanations of the improvements."

  # Optional: Set temperature for more creative suggestions
  temperature = 0.7

  # Optional: Set maximum tokens
  max_tokens = 1000

  metadata = {
    optimization_type = "algorithm"
    complexity_focus  = "time-complexity"
  }
}

# Create a run with file search capability
resource "openai_vector_store" "docs_store" {
  name = "Documentation Store"
}

resource "openai_assistant" "docs_assistant" {
  name  = "Documentation Assistant"
  model = "gpt-4-turbo-preview"

  instructions = "You help users find and understand documentation."

  tools {
    type = "file_search"
  }

  tool_resources = {
    file_search = {
      vector_store_ids = [openai_vector_store.docs_store.id]
    }
  }
}

resource "openai_thread" "docs_thread" {
  messages = [
    {
      role    = "user"
      content = "How do I configure authentication in the system?"
    }
  ]
}

resource "openai_run" "docs_search_run" {
  thread_id    = openai_thread.docs_thread.id
  assistant_id = openai_assistant.docs_assistant.id

  tools {
    type = "file_search"
  }

  metadata = {
    search_type = "documentation"
    topic       = "authentication"
  }
}

# Output run ID
output "code_review_run_id" {
  value = openai_run.code_review_run.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `assistant_id` (String) The ID of the assistant to use for the run.
- `thread_id` (String) The ID of the thread to run the assistant on.

### Optional

- `completion_window` (Number) The maximum amount of time to wait for the run to complete, in seconds. If not provided, the run will be created but not waited for.
- `instructions` (String) Override the default instructions of the assistant for the run.
- `max_tokens` (Number) The maximum number of tokens to generate in the run. The default value is inf.
- `metadata` (Map of String) Metadata to associate with the run.
- `model` (String) The model to use for the run. If not provided, the assistant's model will be used.
- `stream_for_tool` (Boolean) Streaming for tool use is only available in the Chat Completions API.
- `temperature` (Number) The sampling temperature to use. Higher values make the output more random, lower values make it more deterministic.
- `tools` (List of Map of String) Override the tools of the assistant for the run.
- `top_p` (Number) An alternative to sampling with temperature. Defaults to 1.

### Read-Only

- `completed_at` (Number) The timestamp for when the run was completed.
- `created_at` (Number) The timestamp for when the run was created.
- `file_ids` (List of String) The IDs of the files used in the run.
- `id` (String) The ID of this resource.
- `object` (String) The object type, which is always 'thread.run'.
- `started_at` (Number) The timestamp for when the run was started.
- `status` (String) The status of the run (queued, in_progress, completed, failed, etc.).
- `steps` (List of Object) The steps of the run. (see [below for nested schema](#nestedatt--steps))
- `usage` (Map of Number) Usage statistics for the run.

<a id="nestedatt--steps"></a>
### Nested Schema for `steps`

Read-Only:

- `created_at` (Number)
- `details` (String)
- `id` (String)
- `object` (String)
- `status` (String)
- `type` (String)
