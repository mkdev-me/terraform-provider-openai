---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "openai_batch Resource - terraform-provider-openai"
subcategory: ""
description: |-
  
---

# openai_batch (Resource)



## Example Usage

```terraform
# Create a file with batch requests for chat completions
resource "openai_file" "batch_input" {
  file    = "${path.module}/batch_requests.jsonl"
  purpose = "batch"
}

# Create a batch job to process multiple chat completion requests
resource "openai_batch" "chat_completions" {
  input_file_id = openai_file.batch_input.id
  endpoint      = "/v1/chat/completions"

  # Optional: Set completion window (default is 24h)
  completion_window = "24h"

  # Optional: Add metadata for tracking
  metadata = {
    department = "customer-support"
    batch_type = "daily-analysis"
    version    = "1.0"
  }
}

# Output the batch ID
output "batch_id" {
  value = openai_batch.chat_completions.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `endpoint` (String) The endpoint to use for the batch request (e.g., 'chat/completions')
- `input_file_id` (String) The ID of the file containing the inputs for the batch

### Optional

- `completion_window` (String) The maximum time to wait for the batch to complete (e.g., '24h')
- `metadata` (Map of String) Set of 16 key-value pairs that can be attached to the batch object
- `project_id` (String) The ID of the project to use for this batch. If not specified, the default project will be used.

### Read-Only

- `created_at` (Number) The timestamp for when the batch was created
- `error` (String) Information about the error that occurred during processing, if any
- `expires_at` (Number) The timestamp for when the batch expires
- `id` (String) The ID of this resource.
- `output_file_id` (String) The ID of the output file
- `status` (String) The status of the batch (validating, validation_failed, processing, processing_failed, completed)

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash
###############################################################################
# OpenAI Batch Import Script
###############################################################################
# This script demonstrates how to import an existing OpenAI batch into
# Terraform state.
#
# Usage:
#   ./import.sh <batch_id>
#
# Arguments:
#   batch_id - ID of the batch to import (format: batch_XXXX)
#
# Example:
#   ./import.sh batch_abc123def456
#
# Requirements:
#   - Terraform must be initialized in this directory
#   - OPENAI_API_KEY environment variable must be set
#
###############################################################################

# Check if batch ID is provided
if [ $# -ne 1 ]; then
  echo "Error: Missing batch ID"
  echo "Usage: $0 <batch_id>"
  echo "Example: $0 batch_abc123def456"
  exit 1
fi

BATCH_ID="$1"

# Validate batch ID format
if [[ ! $BATCH_ID =~ ^batch_ ]]; then
  echo "Error: Invalid batch ID format. Expected format: batch_XXXX"
  exit 1
fi

# Check if OPENAI_API_KEY is set
if [ -z "$OPENAI_API_KEY" ]; then
  echo "Error: OPENAI_API_KEY environment variable not set"
  echo "Please set the OPENAI_API_KEY environment variable with your OpenAI API key."
  exit 1
fi

echo "Importing OpenAI Batch: $BATCH_ID"
echo ""

# Create a temporary import configuration
cat > import_batch.tf << EOF
# Temporary configuration for importing batch
resource "openai_batch" "imported" {
  input_file_id    = "file-placeholder"
  endpoint         = "/v1/chat/completions"
  completion_window = "24h"
}
EOF

# Initialize Terraform
echo "Initializing Terraform..."
terraform init

# Import the batch
echo "Importing batch..."
terraform import openai_batch.imported "$BATCH_ID"

if [ $? -eq 0 ]; then
  echo ""
  echo "Batch imported successfully!"
  echo ""
  echo "Next steps:"
  echo "1. Run 'terraform show' to see the imported batch details"
  echo "2. Update resource.tf with the actual batch configuration"
  echo "3. Run 'terraform plan' to verify no changes are needed"
  echo "4. Remove import_batch.tf when done"
  echo ""
  echo "Note: Batches are immutable once created, so the imported"
  echo "resource will be read-only in Terraform."
else
  echo ""
  echo "Import failed. Please check the batch ID and your permissions."
fi

# Clean up temporary file
rm -f import_batch.tf
```
