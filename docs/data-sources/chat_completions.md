---
page_title: "OpenAI: openai_chat_completions Data Source"
subcategory: ""
description: |-
  Lists and filters OpenAI chat completions.
---

# openai_chat_completions Data Source

> **Important Note:** This data source requires the "Chat Completions Store" feature to be enabled on your OpenAI account. This is a relatively new and experimental feature that is not available by default for all accounts. Without this feature enabled, the endpoint will return an empty list of completions.

The `openai_chat_completions` data source allows you to retrieve a list of chat completions with various filtering options. This is useful for monitoring your API usage, analyzing recent completions, or retrieving completions that match specific criteria.

## Example Usage

```hcl
# Get the 5 most recent completions
data "openai_chat_completions" "recent" {
  limit = 5
  order = "desc"
}

# Get completions for a specific model
data "openai_chat_completions" "gpt4_completions" {
  model = "gpt-4"
  limit = 10
}

# Filter completions by metadata
data "openai_chat_completions" "project_completions" {
  metadata = {
    project = "customer-support"
    user_id = "user123"
  }
}

# Pagination example
data "openai_chat_completions" "paginated" {
  after = "chatcmpl-abc123"
  limit = 20
}
```

## Argument Reference

* `api_key` - (Optional) Custom API key to use for this data source. If not provided, the provider's default API key will be used.
* `after` - (Optional) Identifier for the last chat completion from the previous pagination request.
* `limit` - (Optional) Number of chat completions to retrieve. Defaults to 20, maximum is 100.
* `metadata` - (Optional) A map of metadata keys to filter the chat completions by.
* `model` - (Optional) The model used to generate the chat completions (e.g., "gpt-4", "gpt-3.5-turbo").
* `order` - (Optional) Sort order for chat completions by timestamp. Use "asc" for ascending order or "desc" for descending order. Defaults to "asc".

## Attribute Reference

* `id` - A unique identifier for this data source.
* `chat_completions` - The list of chat completions matching the filters. Each completion contains:
  * `id` - The ID of the chat completion.
  * `object` - The object type, which is always "chat.completion".
  * `created` - The Unix timestamp (in seconds) of when the chat completion was created.
  * `model` - The model used for the chat completion.
  * `choices` - The list of completion choices the model generated. Each choice contains:
    * `index` - The index of the choice in the list of choices.
    * `message` - The message generated by the model, containing:
      * `role` - The role of the message author.
      * `content` - The content of the message.
      * `function_call` - The function call details, if present:
        * `name` - The name of the function to call.
        * `arguments` - The arguments to call the function with, as a JSON string.
    * `finish_reason` - The reason the model stopped generating text.
  * `usage` - Usage statistics for the chat completion request:
    * `prompt_tokens` - Number of tokens in the prompt.
    * `completion_tokens` - Number of tokens in the completion.
    * `total_tokens` - Total number of tokens used.
* `has_more` - Whether there are more chat completions to retrieve. 